Timings for one mutex, locking the entire array before accessing it at all (before any reads or writes).
1000 threads. 100 array elements.


MATLAB Code to initialize array of timings:

timings = [1.026321 1.021581 1.023653 1.221545 1.029798 1.035475 1.218336 1.018594 3.025027 1.212901 1.013390 1.017377 1.014481 1.033286 1.220199 1.222831 1.219340 1.021479 1.019987 1.022102 1.023279 1.030226 1.019255 1.023725 1.026624 3.017999 1.022405 1.216442 1.219483 1.022132 1.023273 1.225454 1.023276 3.014109 1.021558 1.024667 1.027699 1.214758 1.030314 1.022588 1.217051 1.033055 1.031894 1.019536 1.023651 1.026332 1.219685 1.020660 1.017875 1.023704 1.026836 1.031282 1.018409 1.028438 1.021501 1.220147 1.031538 1.017906 3.438562 1.020286 1.031339 1.215371 1.030064 1.019614 1.023398 1.026298 7.699748 1.225082 1.220817 1.218563 1.222397 1.023867 1.018618 1.024330 1.021912 1.023741 1.214898 1.214550 1.024425 3.023697 1.023617 1.020834 1.024241 3.018507 3.021052 1.223796 3.020433 1.032523 1.021985 1.019896 1.022551 1.024274 3.018955 1.214226 1.017135 1.020166 1.215889 1.023842 1.024753 1.020332]


Average Time: 1.3193



Code:


void *ServerEcho(void *args) {
    int clientFileDescriptor=(int)args;
    char str[STRMAX];

    read(clientFileDescriptor,str,STRMAX);

    char* pos = str;
    pos++;
    int index = atoi(pos);

    pthread_mutex_lock(&mutex);
    if (str[0] == 'w') {
        sprintf(theArray[index], "String %d has been modified by a write request", index);
    }
    write(clientFileDescriptor,theArray[index],STRMAX);
    read(clientFileDescriptor,theArray[index],STRMAX);
    pthread_mutex_unlock(&mutex);
    
    close(clientFileDescriptor);


}





Data:

1.026321
1.021581
1.023653
1.221545
1.029798
1.035475
1.218336
1.018594
3.025027
1.212901
1.013390
1.017377
1.014481
1.033286
1.220199
1.222831
1.219340
1.021479
1.019987
1.022102
1.023279
1.030226
1.019255
1.023725
1.026624
3.017999
1.022405
1.216442
1.219483
1.022132
1.023273
1.225454
1.023276
3.014109
1.021558
1.024667
1.027699
1.214758
1.030314
1.022588
1.217051
1.033055
1.031894
1.019536
1.023651
1.026332
1.219685
1.020660
1.017875
1.023704
1.026836
1.031282
1.018409
1.028438
1.021501
1.220147
1.031538
1.017906
3.438562
1.020286
1.031339
1.215371
1.030064
1.019614
1.023398
1.026298
7.699748
1.225082
1.220817
1.218563
1.222397
1.023867
1.018618
1.024330
1.021912
1.023741
1.214898
1.214550
1.024425
3.023697
1.023617
1.020834
1.024241
3.018507
3.021052
1.223796
3.020433
1.032523
1.021985
1.019896
1.022551
1.024274
3.018955
1.214226
1.017135
1.020166
1.215889
1.023842
1.024753
1.020332