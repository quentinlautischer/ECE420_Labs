Timings for 1 mutex, only wrapped around the writes. Reads are not in the mutex at all; only writing (updating) the array.
1000 threads. 100 array elements.



MATLAB Code to initialize array of timings:

timings = [3.022755 3.221109 3.022305 7.034345 3.025808 1.423179 3.219511 3.018240 3.226160 3.026296 3.427440 1.024787 3.230632 3.484865 3.225596 3.019954 1.225759 15.05385 3.025399 7.030254 3.024522 3.229003 3.223386 3.227096 7.228332 7.039110 7.229545 1.222980 1.024965 7.044439 3.030321 15.05371 3.020921 1.429897 1.225613 3.029819 5.067345 3.022973 1.219864 15.04512 15.04584 1.034509 3.024344 3.021978 1.419440 3.691995 3.225117 3.020359 7.634424 1.214104 3.018282 1.218168 3.024636 3.026588 3.221630 2.625234 7.235142 1.833729 15.03918 7.227997 3.030661 7.230354 1.417444 7.024575 7.230775 3.016243 3.225465 7.024143 7.235023 3.021866 3.021799 1.226648 1.438480 3.018373 3.022036 7.244183 1.215335 1.020650 8.621806 3.026726 3.226546 3.028777 3.029653 3.013216 7.224497 7.682487 3.217748 1.829934 3.024931 15.04326 3.221784 3.223663 3.224144 15.03819 3.222846 3.223848 1.217077 7.231057 3.031266 3.021209]


Code:


void *ServerEcho(void *args) {
    int clientFileDescriptor=(int)args;
    char str[STRMAX];

    read(clientFileDescriptor,str,STRMAX);

    char* pos = str;
    pos++;
    int index = atoi(pos);

    
    if (str[0] == 'w') {
        pthread_mutex_lock(&mutex);
        sprintf(theArray[index], "String %d has been modified by a write request", index);
        pthread_mutex_unlock(&mutex);
    }
    
    write(clientFileDescriptor,theArray[index],STRMAX);
    
    read(clientFileDescriptor,str,STRMAX);

    
    close(clientFileDescriptor);
}






Data:

3.022755
3.221109
3.022305
7.034345
3.025808
1.423179
3.219511
3.018240
3.226160
3.026296
3.427440
1.024787
3.230632
3.484865
3.225596
3.019954
1.225759
15.05385
3.025399
7.030254
3.024522
3.229003
3.223386
3.227096
7.228332
7.039110
7.229545
1.222980
1.024965
7.044439
3.030321
15.05371
3.020921
1.429897
1.225613
3.029819
5.067345
3.022973
1.219864
15.04512
15.04584
1.034509
3.024344
3.021978
1.419440
3.691995
3.225117
3.020359
7.634424
1.214104
3.018282
1.218168
3.024636
3.026588
3.221630
2.625234
7.235142
1.833729
15.03918
7.227997
3.030661
7.230354
1.417444
7.024575
7.230775
3.016243
3.225465
7.024143
7.235023
3.021866
3.021799
1.226648
1.438480
3.018373
3.022036
7.244183
1.215335
1.020650
8.621806
3.026726
3.226546
3.028777
3.029653
3.013216
7.224497
7.682487
3.217748
1.829934
3.024931
15.04326
3.221784
3.223663
3.224144
15.03819
3.222846
3.223848
1.217077
7.231057
3.031266
3.021209